<!DOCTYPE html>
<html lang="en">
<head>
    <title>Quarkus Productization App</title>
    <meta charset="UTF-8">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="css/stylesheet.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.6/handlebars.min.js"
            integrity="sha512-zT3zHcFYbQwjHdKjCu6OMmETx8fJA9S7E6W7kBeFxultf75OPTYUJigEKX58qgyQMi1m1EgenfjMXlRZG8BXaw=="
            crossorigin="anonymous"></script>
</head>
<body>
<h1>
    Quarkus Productization App
</h1>


<div class="extensions container">

</div>

<script>

    var header = [{
        id: "name",
        name: "Name",
        type: "label"
    }, {
        id: "productized_since",
        name: "Productized Since",
        type: "label"
    }, {
        id: "support_level",
        name: "Support level for the current release",
        type: "select",
        values: ["SUPPORTED", "UNSUPPORTED", "TENTATIVE"]
    }, {
        id: "notes",
        name: "Notes",
        type: "text"
    }];

    var data = [
        {
            id: "extension1",
            name: "Extension1",
            productized_since: "1.7",
            support_level: "SUPPORTED",
            notes: "from 1.7"
        },
        {
            id: "extension2",
            name: "Extension 2",
            productized_since: "1.9",
            support_level: "UNSUPPORTED",
            notes: "from 1.7"
        },
        {
            id: "extension0",
            name: "Extension 0",
            productized_since: "1.7",
            support_level: "UNSUPPORTED",
            notes: "status unknown"
        }
    ];


    function addClasses(element, classes) {
        classes.forEach(
            css => element.classList.add(css)
        )
    }

    function createDiv(parent, classes, text) {
        let div = document.createElement("div");
        if (text) {
            div.textContent = text;
            div.innerText = text;
        }
        addClasses(div, classes);
        parent.appendChild(div);
        return div;
    }

    function createRow(contentsElement, row) {
        let div = createDiv(contentsElement, ["content", "row"], null);
        createDiv(div, ["cell", "col", "s2"], row.name);
        createDiv(div, ["cell", "col", "s5"], row.version);
        createDiv(div, ["cell", "col", "s5"], row.notes);
    }

    function createTable(container, header, data) {
        let headerDiv = createDiv(container, ["header", "row"], null);
        let columns = [];

        header.forEach(
            headerCell => {
                // mstodo a way to pass id here so that we can make sorting work
                createDiv(headerDiv, ["col"], headerCell.name)
                columns.push(headerCell.id);
            }
        )

        data.forEach(
            dataRow => {
                let dataDiv = createDiv(container, ["data", "row"], null);

                columns.forEach(
                    column => {
                        createDiv(dataDiv, ["col"], dataRow[column]);
                    }
                )
                // mstodo a way to pass id here so that we can make sorting work
            }
        )
    }

    window.onload =
        function () {
            // let data = [{name: "Extension1", version: "1.7", notes: "from 1.7"},
            //     {name: "Extension2", version: "1.9", notes: "from 1.7"},
            //     {name: "Extension0", version: "1.7", notes: "status unknown"}]
            let contents = document.getElementsByClassName("extensions").item(0);
            createTable(contents, header, data);
        };

</script>
</body>
</html>